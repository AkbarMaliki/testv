{"version":3,"sources":["webpack:///./src/pages/testing/pwa/pwa.vue?4d4e","webpack:///src/pages/testing/pwa/pwa.vue","webpack:///./src/pages/testing/pwa/pwa.vue?e983","webpack:///./src/pages/testing/pwa/pwa.vue","webpack:///./node_modules/core-js/modules/es6.string.repeat.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/core-js/modules/_string-repeat.js"],"names":["deferredPrompt","render","_vm","this","_h","$createElement","_c","_self","_v","_s","subsss","attrs","staticClass","on","install","directives","name","rawName","value","vdata","expression","domProps","$event","target","composing","$set","kirim","staticRenderFns","data","content","title","url","id_penerima","timestamp","Date","now","mounted","subscribe","methods","fd","append","console","log","undefined","prompt","userChoice","then","choiceResult","outcome","component","$export","P","repeat","init","byteOffset","length","toInteger","defined","module","exports","count","str","String","res","n","Infinity","RangeError"],"mappings":"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","file":"js/page-testing-pwa-pwa.e705f21c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" \"+_vm._s(_vm.subsss)+\" membuat ICON GENERATOR : \"),_c('a',{attrs:{\"href\":\"https://realfavicongenerator.net/\"}},[_vm._v(\"https://realfavicongenerator.net/\")]),_c('button',{staticClass:\"btn btn-sm btn-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.install}},[_vm._v(\"Install\")]),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata.title),expression:\"vdata.title\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"id\":\"title\",\"name\":\"title\",\"placeholder\":\"title\"},domProps:{\"value\":(_vm.vdata.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.vdata, \"title\", $event.target.value)}}}),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata.content),expression:\"vdata.content\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"id\":\"content\",\"name\":\"content\",\"placeholder\":\"content\"},domProps:{\"value\":(_vm.vdata.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.vdata, \"content\", $event.target.value)}}}),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata.url),expression:\"vdata.url\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"id\":\"url\",\"name\":\"url\",\"placeholder\":\"url\"},domProps:{\"value\":(_vm.vdata.url)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.vdata, \"url\", $event.target.value)}}}),_c('button',{staticClass:\"btn btn-sm btn-primary  \",attrs:{\"type\":\"button\"},on:{\"click\":_vm.kirim}},[_vm._v(\"SEND Notification\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    {{subsss}}\r\n       membuat ICON GENERATOR : \r\n    <a href=\"https://realfavicongenerator.net/\">https://realfavicongenerator.net/</a>\r\n    <button type=\"button\" @click=\"install\" class=\"btn btn-sm btn-secondary\">Install</button>\r\n    <br>\r\n    <input type=\"text\" id=\"title\" name=\"title\" class=\"form-control form-control-sm\" placeholder=\"title\" v-model=\"vdata.title\" >\r\n    <br>\r\n    <input type=\"text\" id=\"content\" name=\"content\" class=\"form-control form-control-sm\" placeholder=\"content\" v-model=\"vdata.content\" >\r\n    <br>\r\n    <input type=\"text\" id=\"url\" name=\"url\" class=\"form-control form-control-sm\" placeholder=\"url\" v-model=\"vdata.url\" >\r\n    <button type=\"button\" @click=\"kirim\" class=\"btn btn-sm btn-primary  \">SEND Notification</button>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nvar deferredPrompt;\r\nexport default{\r\n  data(){\r\n    return{\r\n      vdata:{\r\n        content:\"content\",\r\n        title:\"title\",\r\n        url: {\r\n        link : \"http://localhost:8080\",\r\n      },\r\n        id_penerima:\"1\",\r\n        timestamp: Date.now() + 32400000\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.subscribe()\r\n      window.addEventListener(\"beforeinstallprompt\", function(e) {\r\n        e.preventDefault();\r\n        deferredPrompt = e;\r\n      });\r\n  },\r\n  methods: {\r\n    kirim() {\r\n    \r\n      let fd = new FormData()\r\n      fd.append('data',JSON.stringify(this.vdata))\r\n      fd.append('database','loandocument')\r\n      axios\r\n        .post(\"http://localhost:8080/api/send_push_notification.php\", fd)\r\n        .then(res => {\r\n          console.log(res);\r\n        });\r\n    },\r\n    install() {\r\n      console.log(deferredPrompt)\r\n      if (deferredPrompt !== undefined) {\r\n        deferredPrompt.prompt();\r\n        deferredPrompt.userChoice.then(function(choiceResult) {\r\n          if (choiceResult.outcome == \"dismissed\") {\r\n            console.log(\"User cancelled home screen install\");\r\n          } else {\r\n            console.log(\"User added to home screen\");\r\n          }\r\n          deferredPrompt = null;\r\n        });\r\n      }\r\n    },\r\n     subscribe() {\r\n        if ('Notification' in window) {\r\n          Notification.requestPermission(result => {\r\n            // cek apakah user menerima notifiksinya\r\n            if (result !== 'granted') {\r\n              console.log('notifikasi tidak di perbolehkan')\r\n            } else {\r\n              this.confPushSub()\r\n              console.log('notifikasi aktif')\r\n            }\r\n          })\r\n        } else {\r\n          alert('notifikasi tidak didukung ')\r\n        }\r\n      },\r\n      confPushSub() {\r\n        let that = this\r\n        if (!('serviceWorker' in navigator)) {\r\n          // cek apakah service worker ada/tidak\r\n          return\r\n        }\r\n        navigator.serviceWorker.ready.then(function(sw) {\r\n          console.log(sw)\r\n          sw.pushManager.getSubscription().then(sub => {\r\n            // cek apakah device ini sudah subscribe atau belum\r\n            if (sub === null) {\r\n              sw.pushManager\r\n                .subscribe({\r\n                  userVisibleOnly: true,\r\n                  applicationServerKey: that.urlB64ToUint8Array('BHb6hCsHUmbFb8xXLP46iv_xzns76xPniKia5FiBC1sd7RiAiMuRnv1MbGo-ey5oKYwb_UIo9PBWB-yIrlHJ184')\r\n                })\r\n                .then(subscription => {\r\n                  console.log('Subscribe OK:', subscription)\r\n                  that.subsss = subscription\r\n                  let fd = new FormData()\r\n                  fd.append('data', `insert into subs (subs) values ('${JSON.stringify(subscription.toJSON())}')`)//database setting di server\r\n                  fd.append('database','loandocument')\r\n                  axios.post('http://localhost:8080/api/mysql/auto.php', fd\r\n                  , {\r\n                      headers: {\r\n                      Authorization: localStorage.getItem('auth._token.local')\r\n                      }\r\n                  }).then(res => {\r\n                      console.log(res)\r\n                      this.$forceUpdate()\r\n                  })\r\n                })\r\n                .then((res) => {\r\n                  console.log(res);\r\n                  that.aktif = false\r\n                  localStorage.setItem('subscribe', true)\r\n                  that.newNotif('Berhasil Subscribe')\r\n                })\r\n                .catch(err => {\r\n                  console.log('Subscribe Error:', err)\r\n                })\r\n            } else {\r\n              // that.newNotif('Subscribtion sudah ada')\r\n            }\r\n          })\r\n        })\r\n      },\r\n      newNotif(msg) {\r\n        // cek apakah service worker sudah teregister\r\n        let opt = {\r\n          body: msg, //adalah text dari notifikasi yang lebih jelas dari title\r\n          icon: 'http://localhost:8080/api/icon.png', // bisa url ke luar atau local image\r\n          // image: '../icon.png', // memunculkan image di notifikasi\r\n          dir: 'ltr', // left to right (ltr) atau right to left (rtl)\r\n          lang: 'en-US', //standard\r\n          vibrate: [100, 50, 200], // device bergetar apabila ada notifikasi\r\n          badge: 'http://localhost:8080/api/icon.png', // icon kecil di drawer\r\n          // sound: '../notif.mp3', // sound saat notifikasi masuk (belum semua support)\r\n          //! advance option\r\n          // tag: 'confirm-notification', // kita men set tag agar notifikasi tidak menstack di device\r\n          // renotify: true, // apabila tag sama di dalam beberapa notifikasi, maka status notifikasi akan dianggap baru dan device akan bergetar, jadi apabila false maka tag sama device tidak akan bergetar\r\n          // actions: [\r\n          //   //! list aksi saat notifikasi di pilih\r\n          //   {\r\n          //     action: 'confirm',\r\n          //     title: 'Yes',\r\n          //     icon: '../icon.png'\r\n          //   },\r\n          //   {\r\n          //     action: 'cancel',\r\n          //     title: 'No',\r\n          //     icon: '../icon.png'\r\n          //   }\r\n          // ]\r\n        }\r\n        //! cara memunculkan notifikasi dengan windows object\r\n        // new Notification('new notif', opt)\r\n        //! cara menjalankan notifikasi dari service worker melalui navigator\r\n        if ('serviceWorker' in navigator) {\r\n          // apabila service worker ada , maka jalankan notifikasi melalui service worker\r\n          navigator.serviceWorker.ready.then(function(sw) {\r\n            // service worker menjalankan notifikasi\r\n            sw.showNotification('Subscribe', opt)\r\n          })\r\n        }\r\n      },\r\n      urlB64ToUint8Array(base64String) {\r\n        const padding = '='.repeat((4 - (base64String.length % 4)) % 4)\r\n        const base64 = (base64String + padding)\r\n          .replace(/\\-/g, '+')\r\n          .replace(/_/g, '/')\r\n        const rawData = window.atob(base64)\r\n        const outputArray = new Uint8Array(rawData.length)\r\n        for (let i = 0; i < rawData.length; ++i) {\r\n          outputArray[i] = rawData.charCodeAt(i)\r\n        }\r\n        return outputArray\r\n      }\r\n  },\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pwa.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pwa.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pwa.vue?vue&type=template&id=6d3389c2&\"\nimport script from \"./pwa.vue?vue&type=script&lang=js&\"\nexport * from \"./pwa.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n"],"sourceRoot":""}