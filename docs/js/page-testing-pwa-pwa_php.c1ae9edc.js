(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-testing-pwa-pwa_php"],{"14b9":function(t,e,a){var n=a("5ca1");n(n.P,"String",{repeat:a("97446")})},"34ef":function(t,e,a){a("ec30")("Uint8",1,(function(t){return function(e,a,n){return t(this,e,a,n)}}))},"82b1":function(t,e,a){"use strict";a.r(e);var n,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v(" "+t._s(t.subsss)+" "),a("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button"},on:{click:t.install}},[t._v("Install")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.title,expression:"vdata.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"title",name:"title",placeholder:"title"},domProps:{value:t.vdata.title},on:{input:function(e){e.target.composing||t.$set(t.vdata,"title",e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.content,expression:"vdata.content"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"content",name:"content",placeholder:"content"},domProps:{value:t.vdata.content},on:{input:function(e){e.target.composing||t.$set(t.vdata,"content",e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata.url,expression:"vdata.url"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"url",name:"url",placeholder:"url"},domProps:{value:t.vdata.url},on:{input:function(e){e.target.composing||t.$set(t.vdata,"url",e.target.value)}}}),a("button",{staticClass:"btn btn-sm btn-primary  ",attrs:{type:"button"},on:{click:t.kirim}},[t._v("SEND Notification")])])},i=[],r=(a("34ef"),a("a481"),a("14b9"),a("bc3a")),s=a.n(r),l={data:function(){return{}},mounted:function(){this.subscribe(),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),n=t}))},methods:{kirim:function(t){var e=new FormData;e.append("datanya",JSON.stringify({content:"aaaa",title:"title",url:{link:"http://localhost:8080"}})),e.append("data",'select notifid from user where id="'.concat(t,'"')),e.append("database","loandocument"),s.a.post("http://localhost:8080/api/send_push_notification.php",e).then((function(t){console.log(t)}))},install:function(){console.log(n),void 0!==n&&(n.prompt(),n.userChoice.then((function(t){"dismissed"==t.outcome?console.log("User cancelled home screen install"):console.log("User added to home screen"),n=null})))},subscribe:function(){var t=this;"Notification"in window?Notification.requestPermission((function(e){if("granted"!==e)console.log("notifikasi tidak di perbolehkan");else{var a=t;if(!("serviceWorker"in navigator))return;navigator.serviceWorker.ready.then((function(t){console.log(t),t.pushManager.getSubscription().then((function(e){null===e&&t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a.urlB64ToUint8Array("BHb6hCsHUmbFb8xXLP46iv_xzns76xPniKia5FiBC1sd7RiAiMuRnv1MbGo-ey5oKYwb_UIo9PBWB-yIrlHJ184")}).then((function(t){console.log("Subscribe OK:",t),a.subsss=t,localStorage.setItem("notifid",JSON.stringify(t.toJSON()))})).catch((function(t){console.log("Subscribe Error:",t)}))}))})),console.log("notifikasi aktif")}})):alert("notifikasi tidak didukung ")},login:function(){var t=this;if(console.log(this.vdata.username,this.vdata.password,md5(this.vdata.password)),"admin"==this.vdata.username&&"btnkantorcabangbanjarbaru"==this.vdata.password)this.$router.push("/driver/admin");else{var e=new FormData;e.append("username",this.vdata.username),e.append("password",md5(this.vdata.password)),s.a.post("http://localhost:8080/api/mysql/ld/login.php",e).then((function(e){console.log(e),localStorage.setItem("auth._token.local",e.data.token),localStorage.setItem("auth.local",e.data.token);var a=new FormData;a.append("data","select * from user"),s.a.post("http://localhost:8080/api/mysql/ld/getUser.php",a,{headers:{Authorization:localStorage.getItem("auth._token.local")}}).then((function(e){console.log(e),t.$store.commit("changeUsers",e.data[0]),localStorage.setItem("users",JSON.stringify(e.data[0])),console.log(e.data[0]);var a=new FormData;a.append("data","update user set notifid='".concat(localStorage.getItem("notifid"),"' where id='").concat(e.data[0].id,"'")),a.append("database","loandocument"),s.a.post("http://localhost:8080/api/mysql/auto.php",a,{headers:{Authorization:localStorage.getItem("auth._token.local")}}).then((function(e){console.log(e),t.$forceUpdate(),t.$router.push("/ld/")}))}))})).catch((function(t){alert("username salah")}))}},urlB64ToUint8Array:function(t){for(var e="=".repeat((4-t.length%4)%4),a=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(a),o=new Uint8Array(n.length),i=0;i<n.length;++i)o[i]=n.charCodeAt(i);return o}}},c=l,u=a("2877"),d=Object(u["a"])(c,o,i,!1,null,null,null);e["default"]=d.exports},97446:function(t,e,a){"use strict";var n=a("4588"),o=a("be13");t.exports=function(t){var e=String(o(this)),a="",i=n(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}}}]);
//# sourceMappingURL=page-testing-pwa-pwa_php.c1ae9edc.js.map