{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.string.repeat.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./src/pages/testing/pwa/pwa_php.vue?7dfd","webpack:///src/pages/testing/pwa/pwa_php.vue","webpack:///./src/pages/testing/pwa/pwa_php.vue?f7b3","webpack:///./src/pages/testing/pwa/pwa_php.vue","webpack:///./node_modules/core-js/modules/_string-repeat.js"],"names":["$export","P","repeat","init","data","byteOffset","length","this","deferredPrompt","render","_vm","_h","$createElement","_c","_self","_v","_s","subsss","staticClass","attrs","on","install","directives","name","rawName","value","vdata","expression","domProps","$event","target","composing","$set","kirim","staticRenderFns","mounted","subscribe","methods","fd","append","content","title","url","console","log","undefined","prompt","userChoice","then","choiceResult","outcome","username","$router","push","res","localStorage","setItem","token","fd2","alert","component","toInteger","defined","module","exports","count","str","String","n","Infinity","RangeError"],"mappings":"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","file":"js/page-testing-pwa-pwa_php.c1ae9edc.js","sourcesContent":["var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" \"+_vm._s(_vm.subsss)+\" \"),_c('button',{staticClass:\"btn btn-sm btn-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.install}},[_vm._v(\"Install\")]),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata.title),expression:\"vdata.title\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"id\":\"title\",\"name\":\"title\",\"placeholder\":\"title\"},domProps:{\"value\":(_vm.vdata.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.vdata, \"title\", $event.target.value)}}}),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata.content),expression:\"vdata.content\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"id\":\"content\",\"name\":\"content\",\"placeholder\":\"content\"},domProps:{\"value\":(_vm.vdata.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.vdata, \"content\", $event.target.value)}}}),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata.url),expression:\"vdata.url\"}],staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"id\":\"url\",\"name\":\"url\",\"placeholder\":\"url\"},domProps:{\"value\":(_vm.vdata.url)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.vdata, \"url\", $event.target.value)}}}),_c('button',{staticClass:\"btn btn-sm btn-primary  \",attrs:{\"type\":\"button\"},on:{\"click\":_vm.kirim}},[_vm._v(\"SEND Notification\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    {{subsss}}\r\n    <button type=\"button\" @click=\"install\" class=\"btn btn-sm btn-secondary\">Install</button>\r\n    <br>\r\n    <input type=\"text\" id=\"title\" name=\"title\" class=\"form-control form-control-sm\" placeholder=\"title\" v-model=\"vdata.title\" >\r\n    <br>\r\n    <input type=\"text\" id=\"content\" name=\"content\" class=\"form-control form-control-sm\" placeholder=\"content\" v-model=\"vdata.content\" >\r\n    <br>\r\n    <input type=\"text\" id=\"url\" name=\"url\" class=\"form-control form-control-sm\" placeholder=\"url\" v-model=\"vdata.url\" >\r\n    <button type=\"button\" @click=\"kirim\" class=\"btn btn-sm btn-primary  \">SEND Notification</button>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nvar deferredPrompt;\r\nexport default{\r\n  data(){\r\n    return{\r\n    \r\n    }\r\n  },\r\n  mounted() {\r\n    this.subscribe()\r\n      window.addEventListener(\"beforeinstallprompt\", function(e) {\r\n        e.preventDefault();\r\n        deferredPrompt = e;\r\n      });\r\n  },\r\n  methods: {\r\n  kirim(id) {\r\n      let fd = new FormData()\r\n      fd.append('datanya',JSON.stringify({\r\n        content:\"aaaa\",\r\n        title:\"title\",\r\n        url: {\r\n        link : \"http://localhost:8080\",\r\n      }}))\r\n      fd.append('data',`select notifid from user where id=\"${id}\"`);\r\n      fd.append('database','loandocument')\r\n      axios\r\n        .post(\"http://localhost:8080/api/send_push_notification.php\", fd)\r\n        .then(res => {\r\n          console.log(res);\r\n        });\r\n    },\r\n    install() {\r\n      console.log(deferredPrompt)\r\n      if (deferredPrompt !== undefined) {\r\n        deferredPrompt.prompt();\r\n        deferredPrompt.userChoice.then(function(choiceResult) {\r\n          if (choiceResult.outcome == \"dismissed\") {\r\n            console.log(\"User cancelled home screen install\");\r\n          } else {\r\n            console.log(\"User added to home screen\");\r\n          }\r\n          deferredPrompt = null;\r\n        });\r\n      }\r\n    },\r\n     subscribe() {\r\n        if ('Notification' in window) {\r\n          Notification.requestPermission(result => {\r\n            // cek apakah user menerima notifiksinya\r\n            if (result !== 'granted') {\r\n              console.log('notifikasi tidak di perbolehkan')\r\n            } else {\r\n               let that = this\r\n                if (!('serviceWorker' in navigator)) {\r\n                  return\r\n                }\r\n                navigator.serviceWorker.ready.then(function(sw) {\r\n                  console.log(sw)\r\n                  sw.pushManager.getSubscription().then(sub => {\r\n                    if (sub === null) {\r\n                      sw.pushManager\r\n                        .subscribe({\r\n                          userVisibleOnly: true,\r\n                          applicationServerKey: that.urlB64ToUint8Array('BHb6hCsHUmbFb8xXLP46iv_xzns76xPniKia5FiBC1sd7RiAiMuRnv1MbGo-ey5oKYwb_UIo9PBWB-yIrlHJ184')\r\n                        })\r\n                        .then(subscription => {\r\n                          console.log('Subscribe OK:', subscription)\r\n                          that.subsss = subscription\r\n                          localStorage.setItem('notifid',JSON.stringify(subscription.toJSON()))\r\n                        })\r\n                        .catch(err => {\r\n                          console.log('Subscribe Error:', err)\r\n                        })\r\n                    } else {\r\n                    }\r\n                  })\r\n               })\r\n              console.log('notifikasi aktif')\r\n            }\r\n          })\r\n        } else {\r\n          alert('notifikasi tidak didukung ')\r\n        }\r\n      },\r\n       login () {\r\n        //  CONTOH METHOD LOGIN DIMANA MENARUH notifid ke user yang login\r\n      console.log(this.vdata.username , this.vdata.password,  md5(this.vdata.password))\r\n      if(this.vdata.username == 'admin' && this.vdata.password == 'btnkantorcabangbanjarbaru'){\r\n        this.$router.push('/driver/admin')\r\n      }else{\r\n      let fd = new FormData()\r\n      fd.append('username', this.vdata.username)\r\n      fd.append('password', md5(this.vdata.password))\r\n      axios\r\n        .post('http://localhost:8080/api/mysql/ld/login.php', fd)\r\n        .then(res => {\r\n          // alert('sukses')\r\n          console.log(res)\r\n          localStorage.setItem('auth._token.local', res.data.token)\r\n          localStorage.setItem('auth.local', res.data.token)\r\n          let fd2 = new FormData()\r\n          fd2.append('data', 'select * from user')\r\n          axios\r\n            .post('http://localhost:8080' + '/api/mysql/ld/getUser.php', fd2, {\r\n              headers: {\r\n                Authorization: localStorage.getItem('auth._token.local')\r\n              }\r\n            })\r\n            .then(res => {\r\n              console.log(res)\r\n              this.$store.commit('changeUsers', res.data[0])\r\n              localStorage.setItem('users', JSON.stringify(res.data[0]))\r\n              console.log(res.data[0])\r\n              let fd = new FormData()\r\n              fd.append('data', `update user set notifid='${localStorage.getItem('notifid')}' where id='${res.data[0].id}'`)//database setting di server\r\n              fd.append('database','loandocument')\r\n              axios.post('http://localhost:8080/api/mysql/auto.php', fd\r\n              , {\r\n                  headers: {\r\n                  Authorization: localStorage.getItem('auth._token.local')\r\n                  }\r\n              }).then(res => {\r\n                  console.log(res)\r\n                  this.$forceUpdate()\r\n                  this.$router.push('/ld/')\r\n              })\r\n            })\r\n        })\r\n        .catch(err => {\r\n          alert('username salah')\r\n        })\r\n      }\r\n    },\r\n      urlB64ToUint8Array(base64String) {\r\n        const padding = '='.repeat((4 - (base64String.length % 4)) % 4)\r\n        const base64 = (base64String + padding)\r\n          .replace(/\\-/g, '+')\r\n          .replace(/_/g, '/')\r\n        const rawData = window.atob(base64)\r\n        const outputArray = new Uint8Array(rawData.length)\r\n        for (let i = 0; i < rawData.length; ++i) {\r\n          outputArray[i] = rawData.charCodeAt(i)\r\n        }\r\n        return outputArray\r\n      }\r\n  },\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pwa_php.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pwa_php.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pwa_php.vue?vue&type=template&id=4de8bf92&\"\nimport script from \"./pwa_php.vue?vue&type=script&lang=js&\"\nexport * from \"./pwa_php.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n"],"sourceRoot":""}